<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>GORDON COLLEGE CCS ADVISING</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- Ionicons -->
    <!-- Theme style -->
    <link rel="stylesheet" href="css/AdminLTE.min.css">
  
    <link rel="stylesheet" href="css/skins/skin-blue.min.css">
	<link href="css/piechart.css" rel="stylesheet">
	<style>
		.table-body {

    position: absolute;
}
#ajax-loader{
	display: none;
	margin: auto;
    width: 60%;
    border:0px solid #8AC007;
    padding: 10px;
	 position: relative;
  top: 50%;
  transform: translateY(-20%);
  opacity:0.9;
}
	</style>
  </head>
  <!--
  BODY TAG OPTIONS:
  =================
  Apply one or more of the following classes to get the
  desired effect
  |---------------------------------------------------------|
  | SKINS         | skin-blue                               |
  |               | skin-black                              |
  |               | skin-purple                             |
  |               | skin-yellow                             |
  |               | skin-red                                |
  |               | skin-green                              |
  |---------------------------------------------------------|
  |LAYOUT OPTIONS | fixed                                   |
  |               | layout-boxed                            |
  |               | layout-top-nav                          |
  |               | sidebar-collapse                        |
  |               | sidebar-mini                            |
  |---------------------------------------------------------|
  -->
  <body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a href="#" class="logo">
          <!-- mini logo for sidebar mini 50x50 pixels -->
          <span class="logo-mini"><b>C</b>CS</span>
          <!-- logo for regular state and mobile devices -->
          <span class="logo-lg"><b>Gordon College</b>CCS</span>
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>
          <!-- Navbar Right Menu -->
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <!-- Messages: style can be found in dropdown.less-->
              
              
             <!-- Tasks Menu -->
              <!-- User Account Menu -->
              <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <!-- The user image in the navbar-->
                  <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
                  <!-- hidden-xs hides the username on small devices so only the image appears. -->
                  <span class="hidden-xs " >Me</span>
                </a>
                <ul class="dropdown-menu">
                  <!-- The user image in the menu -->
                  <li class="user-header">
                    <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                    <p class="name" >
                     STUDENT ID
                     <small id="name"></small>
                    </p>
                  </li>
               
                  <!-- Menu Footer-->
                  <li class="user-footer">
                  
                    <div class="pull-right">
                      <a href="#" class="btn btn-default btn-flat logout">Sign out</a>
                    </div>
                  </li>
                </ul>
              </li>
              <!-- Control Sidebar Toggle Button -->
             
            </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar user panel (optional) -->
          <div class="user-panel">
            <div class="pull-left image">
              <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
            </div>
            <div class="pull-left info">
              <p class="studentID">STUDENT ID</p>
              <!-- Status -->
              <a href="#" class="course">Course</a>
            </div>
          </div>	

          <!-- Sidebar Menu -->
          <ul class="sidebar-menu">
            <li class="header">Lists</li>
          
			 <li class="treeview">
              <a href="home.html"><i class="fa fa-link"></i> <span>My Stats</span> <i class="fa fa-angle-right pull-right"></i></a>
             
            </li>
			 <li class="treeview">
              <a href="prospectus.html"><i class="fa fa-link"></i> <span>My Prospectus</span> <i class="fa fa-angle-left pull-right"></i></a>
              
            </li>
			<li class="treeview">
              <a href="advising.html"><i class="fa fa-link"></i> <span>Advising</span> <i class="fa fa-angle-left pull-right"></i></a>
             
            </li>
			
			<li class="treeview">
              <a href="#"><i class="fa fa-link"></i> <span>Accounts</span> <i class="fa fa-angle-left pull-right"></i></a>
              <ul class="treeview-menu">
                <li><a href="changepass.html">Change Password</a></li>
                <li><a href="#" id="btnLogout" class="logout">Log Out</a></li>
              </ul>
            </li>
			
          </ul><!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
            Advising (Enlisting)
            <small id="enlisting_period"></small>
          </h1>
		  
		  
		  
		  
        </section>

        <!-- Main content -->
        <section class="content">

         <div class="container">
		 <div class="panel panel-primary">
		 
      <div class="panel-heading">
        <h3 class="panel-title" id="enlisting">Enlisting</h3>
     
		<br>
		 
	 </div>
	
      <div class="panel-body">
	  
	 <br>
	  <div class="dropdown">
			  <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" id="txtSchedule" style="width:100%">
				Choose Schedule
				<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" id="chooseSchedule"aria-labelledby="dropdownMenu1"  style="width:100%">
				<li><a href="#"><strong><i>Morning</i></strong></a></li>
				<li><a href="#"><strong><i>Afternoon</i></strong></a></li>
				<li><a href="#"><strong><i>Evening</i></strong></a></li>

			  </ul>
			 
		 </div>
        	<table class="table ">
						<thead><tr><th>CODE<th>TITLE</thead>
							<tbody id="tblAdvising">
							</tbody>
			</table>
			
			<br>
			 <button class="btn btn-primary" id="btnReview" style="width:100%">Enlist</button>
			
      </div>
    </div>
           
        <!-- /#page-content-wrapper -->

		</div>
		

        </section><!-- /.content -->
	</div>
		
	  
	  </div><!-- /.content-wrapper -->
		</section>
      <!-- Main Footer -->
	  </div>
  <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
          Anything you want
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2015 <a href="http://www.facebook.com/primoashbee" target="_blank">Ashbee</a>.</strong> All rights reserved.
      </footer>
  
      <!-- Add the sidebar's background. This div must be placed
           immediately after the control sidebar -->
      <div class="control-sidebar-bg"></div>
    </div><!-- ./wrapper -->
		<div class="modal fade" id="mdlEnlist" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">Review Enlistment</h4>
			  </div>
			  <div class="modal-body">
				<h3 id="enlistedSched"></h3>
				<ol id="enlistedsubs"></ol>
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" id="btnSubmitEnlistment" class="btn btn-primary">Submit</button>
			  </div>
			</div>
		  </div>
		</div>
		
			<div class="modal fade" id="mdlLogout" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">Are you sure?</h4>
			  </div>
			  <div class="modal-body">
				<button type="button" class="btn btn-success" id="logmeout">Yes</button>
				<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
			  </div>
			  <div class="modal-footer">
				
				<button type="button"  class="btn btn-primary"  data-dismiss="modal">Close</button>
			  </div>
			</div>
		  </div>
		</div>
    <!-- REQUIRED JS SCRIPTS -->

    <!-- jQuery 2.1.4 -->
    <script src="js/jquery.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="js/bootstrap.min.js"></script>
    <!-- AdminLTE App -->
    <script src="dist/js/app.min.js"></script>
    <script src="js/jquery.easypiechart.js"></script>
	<script>
	var x = JSON.parse(localStorage.getItem('LISTS'))
	var code=[];
	var sched;
	$(function(){
		$('#program').html(x.PROSPECTUS[0].NAME)
		$('.studentID').html(localStorage.getItem('USERNAME'))
		$('.course').html(JSON.parse(localStorage.getItem('LISTS')).INFO.COURSE);
	$('#enlisting_period').html(x.PROSPECTUS[0].NAME)
	$('.name').html(JSON.parse(localStorage.getItem('LISTS')).INFO.LNAME+", "+JSON.parse(localStorage.getItem('LISTS')).INFO.FNAME+", "+JSON.parse(localStorage.getItem('LISTS')).INFO.MNAME);
	$('#enlisting').html(x.INFO.COURSE+" - "+x.INFO.YEARLEVEL +" - "+x.SEM[0]+" "+x.SEM[1])
	$.each(x.ENLISTMENT,function(k,v){
		$('#tblAdvising').append('<tr value=\"'+v.CODE+'\"><td>'+v.CODE+'</td><td>'+v.TITLE)
	
	})
	})
	$("#tblAdvising").on('click','tr',function(e){
	 e.preventDefault();
	 var id = $(this).attr('value');
	if(($(this).css('background-color'))==("rgba(0, 0, 0, 0)")){
	$(this).css('background-color',"rgb(60, 141, 188)");
		code.push(id)
	} else {
	$(this).css('background-color',"rgba(0,0,0,0)");
  //  console.log(id);
	code.pop(id)
	}
	console.log(code)
	});
	$('#chooseSchedule>li>a').click(function(){
	sched =$(this).text()
	
	$('#dropdownMenu1').text(sched);
	})
	$('#btnReview').click(function(){
	if((code.length<1)){
	alert("Select Subjects First")
	return;
	}
	if(sched==undefined){
		alert("Select Schedule First")
	return;

	}
	for(i=0;i<=code.length-1;i++){
	$('#enlistedSched').html('Preffered Time: '+sched);
	$('#enlistedsubs').append('<li>'+code[i]+'</li>');
	}
	$('#mdlEnlist').modal('show')
	})
	$("#btnSubmitEnlistment").click(function(){
	
	$.ajax({
	url:'http://www.gcccs.org/gc/studs/enlist.php',
	type:'POST',
	dataType:'JSON',
	data:{subjects:code,sched:sched,id:localStorage.getItem('USERNAME')},
	success:function(data){
	alert(data.MSG);
	$('#mdlEnlist').modal('hide');
	},
	done:function(data){
		alert(data.MSG);
	$('#mdlEnlist').modal('hide');
	}
	})
	})
		$('.logout').click(function(){
			$('#mdlLogout').modal('show')
			})
	
	</script>

  </body>
</html>
